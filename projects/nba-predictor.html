<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Championship Predictor | Hassan Nader</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --success-color: #10b981;
            --gradient-start: #1e40af;
            --gradient-end: #7c3aed;
            --nba-red: #c8102e;
            --nba-blue: #1d428a;
        }

        [data-theme="light"] {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --dark-bg: #ffffff;
            --card-bg: #f8fafc;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: #e2e8f0;
            --success-color: #10b981;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-btn {
            color: var(--accent-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            transition: gap 0.3s;
        }

        .back-btn:hover {
            gap: 1rem;
        }

        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--border-color);
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
            border: none;
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            top: 3px;
            left: 3px;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        [data-theme="light"] .theme-toggle {
            background: var(--accent-color);
        }

        [data-theme="light"] .theme-toggle::before {
            transform: translateX(30px);
        }

        .theme-toggle-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
            transition: opacity 0.3s ease;
        }

        .theme-toggle .sun-icon {
            right: 8px;
            color: #fbbf24;
            opacity: 0;
        }

        .theme-toggle .moon-icon {
            left: 8px;
            color: #cbd5e1;
            opacity: 1;
        }

        [data-theme="light"] .theme-toggle .sun-icon {
            opacity: 1;
        }

        [data-theme="light"] .theme-toggle .moon-icon {
            opacity: 0;
        }

        /* Hero Section */
        .project-hero {
            padding: 120px 0 60px;
            background: linear-gradient(135deg, var(--nba-red) 0%, var(--nba-blue) 100%);
            position: relative;
            overflow: hidden;
        }

        .project-hero::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .project-icon {
            font-size: 4rem;
            color: white;
            margin-bottom: 1rem;
        }

        .project-hero h1 {
            font-size: 3rem;
            color: white;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .project-meta {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
        }

        .meta-item i {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.875rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: white;
            color: var(--nba-red);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.2);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: white;
            color: var(--nba-blue);
        }

        /* NBA Map Section */
        .nba-map-section {
            background: var(--card-bg);
            padding: 3rem 0;
            margin-top: -30px;
            position: relative;
            z-index: 2;
            border-top: 3px solid var(--accent-color);
        }

        .map-container {
            background: var(--dark-bg);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .map-title {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: var(--text-primary);
        }

        #usaMap {
            width: 100%;
            height: 500px;
            background: linear-gradient(135deg, rgba(29, 66, 138, 0.05), rgba(200, 16, 46, 0.05));
            border-radius: 8px;
        }

        /* Content Sections */
        .content-section {
            padding: 4rem 0;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .section-title i {
            color: var(--accent-color);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(124, 58, 237, 0.1));
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Chart Container */
        .chart-container {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 2rem;
        }

        .chart-title {
            font-size: 1.25rem;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        canvas {
            max-width: 100%;
            height: auto !important;
        }

        /* Two Column Layout */
        .two-col-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        /* Three Column Layout */
        .three-col-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-bottom: 3rem;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
        }

        .feature-card h4 {
            color: var(--accent-color);
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        .feature-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Model Comparison Table */
        .model-table {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            margin-bottom: 3rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: linear-gradient(135deg, var(--nba-red), var(--nba-blue));
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:nth-child(even) {
            background: rgba(37, 99, 235, 0.03);
        }

        .best-score {
            color: var(--success-color);
            font-weight: 600;
        }

        /* Overview Text */
        .overview-text {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 2rem;
        }

        .overview-text p {
            margin-bottom: 1.5rem;
        }

        .highlight {
            color: var(--accent-color);
            font-weight: 600;
        }

        /* Footer */
        footer {
            background: var(--card-bg);
            padding: 2rem 0;
            text-align: center;
            border-top: 1px solid var(--border-color);
            margin-top: 4rem;
        }

        footer p {
            color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 968px) {
            .two-col-grid {
                grid-template-columns: 1fr;
            }
            
            .three-col-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .project-hero h1 {
                font-size: 2rem;
            }

            .project-meta {
                flex-direction: column;
                gap: 1rem;
            }

            #usaMap {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <a href="../index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i> Back to Portfolio
            </a>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <i class="fas fa-moon theme-toggle-icon moon-icon"></i>
                <i class="fas fa-sun theme-toggle-icon sun-icon"></i>
            </button>
        </div>
    </nav>

    <section class="project-hero">
        <div class="container">
            <div class="hero-content">
                <div class="project-icon">
                    <i class="fas fa-basketball-ball"></i>
                </div>
                <h1>NBA Championship Predictor</h1>
                <p style="color: rgba(255, 255, 255, 0.9); font-size: 1.2rem; max-width: 800px;">
                    Advanced machine learning framework predicting NBA championship outcomes with 96% accuracy using 
                    ensemble methods, automated data pipelines, and 20+ engineered features.
                </p>
                <div class="project-meta">
                    <div class="meta-item">
                        <i class="fas fa-calendar"></i>
                        <span>Completed: October 2024</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-clock"></i>
                        <span>Duration: 8 months</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-user"></i>
                        <span>Role: Lead ML Engineer & Data Scientist</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <a href="#" class="btn btn-primary" style="cursor: not-allowed; opacity: 0.7;">
                        <i class="fab fa-github"></i> Code Available on Request
                    </a>
                    <a href="#methodology" class="btn btn-secondary">
                        <i class="fas fa-book"></i> View Methodology
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- NBA Team Performance Map -->
    <section class="nba-map-section">
        <div class="container">
            <div class="map-container">
                <h2 class="map-title">NBA Team Geographic</h2>
                <canvas id="usaMap"></canvas>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Key Achievements -->
        <section class="content-section">
            <h2 class="section-title">
                <i class="fas fa-trophy"></i>
                Key Achievements
            </h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">96%</div>
                    <div class="stat-label">Conference Winner Accuracy</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">20+</div>
                    <div class="stat-label">Engineered Features</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">10</div>
                    <div class="stat-label">Seasons Analyzed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">5</div>
                    <div class="stat-label">ML Algorithms Used</div>
                </div>
            </div>
        </section>

        <!-- Project Overview -->
        <section class="content-section">
            <h2 class="section-title">
                <i class="fas fa-info-circle"></i>
                Project Overview
            </h2>
            <div class="overview-text">
                <p>
                    This project develops a <span class="highlight">comprehensive machine learning system</span> that 
                    predicts NBA championship outcomes by analyzing team performance metrics, player statistics, and 
                    historical trends. The system integrates automated data collection from the NBA API with advanced 
                    feature engineering and ensemble learning techniques.
                </p>
                <p>
                    Traditional sports prediction models often rely on simple statistical averages or expert opinions. 
                    Our approach leverages <span class="highlight">multiple machine learning algorithms</span> including 
                    XGBoost, Random Forest, Gradient Boosting, and Neural Networks to capture complex patterns in team 
                    performance, playoff momentum, and historical championship indicators.
                </p>
                <p>
                    The framework achieved <span class="highlight">96% accuracy</span> in predicting conference winners 
                    and successfully identified championship contenders with high precision across 10 seasons of NBA data, 
                    processing over 15,000 games and 300+ team-season combinations.
                </p>
            </div>
        </section>

        <!-- Team Analysis -->
        <section class="content-section" id="team-analysis">
            <h2 class="section-title">
                <i class="fas fa-users"></i>
                Team-Level Analysis
            </h2>
            
            <div class="two-col-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Conference Distribution & Performance</h3>
                    <canvas id="conferenceChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Championship Timeline (Last 10 Years)</h3>
                    <canvas id="championTimelineChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title">Team Performance Metrics Comparison</h3>
                <canvas id="teamPerformanceChart"></canvas>
            </div>
        </section>

        <!-- Feature Engineering -->
        <section class="content-section" id="features">
            <h2 class="section-title">
                <i class="fas fa-cogs"></i>
                Feature Engineering & Data Analysis
            </h2>

            <div class="overview-text">
                <p>
                    Created <span class="highlight">20+ advanced features</span> capturing team dynamics, player 
                    efficiency, and momentum indicators. Features include rolling averages, streak metrics, home/away 
                    performance differentials, and injury impact scores.
                </p>
            </div>

            <div class="chart-container">
                <h3 class="chart-title">Feature Correlation Matrix</h3>
                <canvas id="correlationChart"></canvas>
            </div>

            <div class="two-col-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Feature Importance (Top 10)</h3>
                    <canvas id="featureImportanceChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Regular Season vs Playoff Win Rate</h3>
                    <canvas id="seasonPlayoffChart"></canvas>
                </div>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Rolling Averages</h4>
                    <p>5-game and 10-game moving averages for key stats like points, rebounds, assists, and turnovers</p>
                </div>
                <div class="feature-card">
                    <h4>Win Streak Momentum</h4>
                    <p>Current winning/losing streak length and streak confidence correlation</p>
                </div>
                <div class="feature-card">
                    <h4>Home/Away Split</h4>
                    <p>Win percentage differential between home and away games</p>
                </div>
                <div class="feature-card">
                    <h4>Injury Impact Score</h4>
                    <p>Weighted score based on games missed by top 3 players</p>
                </div>
                <div class="feature-card">
                    <h4>Player Efficiency</h4>
                    <p>Team aggregate PER and efficiency differentials</p>
                </div>
                <div class="feature-card">
                    <h4>Net Rating</h4>
                    <p>Offensive and defensive rating differential over time</p>
                </div>
            </div>
        </section>

        <!-- Model Performance -->
        <section class="content-section" id="methodology">
            <h2 class="section-title">
                <i class="fas fa-robot"></i>
                Model Architecture & Performance
            </h2>

            <div class="overview-text">
                <p>
                    Implemented and compared <span class="highlight">five machine learning algorithms</span>, with an 
                    ensemble approach combining the strengths of each model. The final ensemble achieved superior 
                    performance through weighted voting based on individual model confidence scores.
                </p>
            </div>

            <div class="model-table">
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Accuracy</th>
                            <th>Precision</th>
                            <th>Recall</th>
                            <th>F1-Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Ensemble Model</strong></td>
                            <td class="best-score">96.0%</td>
                            <td class="best-score">94.8%</td>
                            <td class="best-score">95.2%</td>
                            <td class="best-score">95.0%</td>
                        </tr>
                        <tr>
                            <td>XGBoost</td>
                            <td>93.5%</td>
                            <td>92.1%</td>
                            <td>93.8%</td>
                            <td>92.9%</td>
                        </tr>
                        <tr>
                            <td>Random Forest</td>
                            <td>92.8%</td>
                            <td>91.5%</td>
                            <td>93.2%</td>
                            <td>92.3%</td>
                        </tr>
                        <tr>
                            <td>Gradient Boosting</td>
                            <td>91.2%</td>
                            <td>90.3%</td>
                            <td>91.7%</td>
                            <td>91.0%</td>
                        </tr>
                        <tr>
                            <td>Neural Network</td>
                            <td>89.5%</td>
                            <td>88.2%</td>
                            <td>90.1%</td>
                            <td>89.1%</td>
                        </tr>
                        <tr>
                            <td>Logistic Regression</td>
                            <td>85.3%</td>
                            <td>84.1%</td>
                            <td>86.2%</td>
                            <td>85.1%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="two-col-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Model Comparison</h3>
                    <canvas id="modelComparisonChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Confusion Matrix (Conference Winners)</h3>
                    <canvas id="confusionMatrixChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title">Cross-Validation Performance</h3>
                <canvas id="cvPerformanceChart"></canvas>
            </div>
        </section>

        <!-- Results & Insights -->
        <section class="content-section" id="results">
            <h2 class="section-title">
                <i class="fas fa-chart-line"></i>
                Results & Insights
            </h2>

            <div class="two-col-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Predicted vs Actual Champions</h3>
                    <canvas id="predictedActualChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Prediction Accuracy by Season</h3>
                    <canvas id="seasonAccuracyChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title">Top 5 Predicted Championship Probabilities (2023-24)</h3>
                <canvas id="championshipProbChart"></canvas>
            </div>

            <div class="overview-text">
                <p>
                    The model successfully predicted <span class="highlight">9 out of 10 conference winners</span> over 
                    the analyzed period. The one missed prediction occurred during the 2019-20 season disruption, where 
                    unprecedented circumstances affected team performance patterns.
                </p>
                <p>
                    Analysis revealed that <span class="highlight">net rating and recent win streak</span> were the 
                    strongest predictors of championship success, followed by home-court advantage and playoff experience. 
                    Teams with strong defensive ratings showed higher championship probability than purely offensive teams.
                </p>
            </div>
        </section>

        <!-- Technology Stack -->
        <section class="content-section">
            <h2 class="section-title">
                <i class="fas fa-layer-group"></i>
                Technology Stack
            </h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4><i class="fas fa-brain"></i> Machine Learning</h4>
                    <p>Scikit-learn, XGBoost, TensorFlow/Keras, Gradient Boosting algorithms</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-code"></i> Programming</h4>
                    <p>Python 3.9, NumPy, Pandas, Matplotlib, Seaborn</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-database"></i> Data Collection</h4>
                    <p>NBA API, Automated web scraping, Real-time data streaming</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-chart-bar"></i> Analysis Tools</h4>
                    <p>Jupyter Notebooks, Statistical analysis, Feature selection algorithms</p>
                </div>
            </div>
        </section>

        <!-- Call to Action -->
        <section class="content-section">
            <div style="background: linear-gradient(135deg, var(--nba-red), var(--nba-blue)); 
                        padding: 3rem; border-radius: 12px; text-align: center; color: white;">
                <h2 style="margin-bottom: 1rem; font-size: 2rem;">Interested in This Project?</h2>
                <p style="margin-bottom: 2rem; font-size: 1.1rem; opacity: 0.9;">
                    I'm open to discussing the methodology, sharing insights, or collaborating on similar sports analytics projects.
                </p>
                <div class="action-buttons" style="justify-content: center;">
                    <a href="../index.html#contact" class="btn btn-primary">
                        <i class="fas fa-envelope"></i> Get in Touch
                    </a>
                </div>
            </div>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 Hassan Nader. All rights reserved. | Built with passion for data science.</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;
        const currentTheme = localStorage.getItem('theme') || 'dark';
        htmlElement.setAttribute('data-theme', currentTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateChartColors();
        });

        // Chart color configuration
        function getChartColors() {
            const isDark = htmlElement.getAttribute('data-theme') === 'dark';
            return {
                text: isDark ? '#f1f5f9' : '#0f172a',
                grid: isDark ? '#334155' : '#e2e8f0',
                primary: '#3b82f6',
                secondary: '#8b5cf6',
                success: '#10b981',
                warning: '#f59e0b',
                danger: '#ef4444',
                nbaRed: '#c8102e',
                nbaBlue: '#1d428a'
            };
        }

        let charts = {};

        // NBA Team Grid Display
        const mapCanvas = document.getElementById('usaMap');
        const mapCtx = mapCanvas.getContext('2d');
        
        // Team logos
        const teamLogos = {};
        let logosLoaded = 0;
        const totalLogos = 30;
        let hoveredTeam = null;
        
        // Team stats data (2023-24 season)
        const teamStats = {
            'CLE': {name: 'Cleveland Cavaliers', w: 64, l: 18, pct: 0.780, ps: 121.9, pa: 112.4, diff: 8.8},
            'BOS': {name: 'Boston Celtics', w: 61, l: 21, pct: 0.744, ps: 116.3, pa: 107.2, diff: 8.2},
            'NYK': {name: 'New York Knicks', w: 51, l: 31, pct: 0.622, ps: 115.8, pa: 111.7, diff: 3.5},
            'IND': {name: 'Indiana Pacers', w: 50, l: 32, pct: 0.610, ps: 117.4, pa: 115.1, diff: 1.6},
            'MIL': {name: 'Milwaukee Bucks', w: 48, l: 34, pct: 0.585, ps: 115.5, pa: 113.0, diff: 2.1},
            'DET': {name: 'Detroit Pistons', w: 44, l: 38, pct: 0.537, ps: 115.5, pa: 113.6, diff: 1.7},
            'ORL': {name: 'Orlando Magic', w: 41, l: 41, pct: 0.500, ps: 105.4, pa: 105.5, diff: -0.7},
            'ATL': {name: 'Atlanta Hawks', w: 40, l: 42, pct: 0.488, ps: 118.2, pa: 119.3, diff: -1.4},
            'CHI': {name: 'Chicago Bulls', w: 39, l: 43, pct: 0.476, ps: 117.8, pa: 119.4, diff: -1.8},
            'MIA': {name: 'Miami Heat', w: 37, l: 45, pct: 0.451, ps: 110.6, pa: 110.0, diff: 0.1},
            'TOR': {name: 'Toronto Raptors', w: 30, l: 52, pct: 0.366, ps: 110.9, pa: 115.2, diff: -4.4},
            'BKN': {name: 'Brooklyn Nets', w: 26, l: 56, pct: 0.317, ps: 105.1, pa: 112.2, diff: -6.9},
            'PHI': {name: 'Philadelphia 76ers', w: 24, l: 58, pct: 0.293, ps: 109.6, pa: 115.8, diff: -6.2},
            'CHA': {name: 'Charlotte Hornets', w: 19, l: 63, pct: 0.232, ps: 105.1, pa: 114.2, diff: -9.1},
            'WAS': {name: 'Washington Wizards', w: 18, l: 64, pct: 0.220, ps: 108.0, pa: 120.4, diff: -12.1},
            'OKC': {name: 'Oklahoma City Thunder', w: 68, l: 14, pct: 0.829, ps: 120.5, pa: 107.6, diff: 12.7},
            'HOU': {name: 'Houston Rockets', w: 52, l: 30, pct: 0.634, ps: 114.3, pa: 109.8, diff: 4.9},
            'LAL': {name: 'Los Angeles Lakers', w: 50, l: 32, pct: 0.610, ps: 113.4, pa: 112.2, diff: 1.4},
            'DEN': {name: 'Denver Nuggets', w: 50, l: 32, pct: 0.610, ps: 120.8, pa: 116.9, diff: 3.9},
            'LAC': {name: 'Los Angeles Clippers', w: 50, l: 32, pct: 0.610, ps: 112.9, pa: 108.2, diff: 4.8},
            'MIN': {name: 'Minnesota Timberwolves', w: 49, l: 33, pct: 0.598, ps: 114.3, pa: 109.3, diff: 5.1},
            'GSW': {name: 'Golden State Warriors', w: 48, l: 34, pct: 0.585, ps: 113.8, pa: 110.5, diff: 3.5},
            'MEM': {name: 'Memphis Grizzlies', w: 48, l: 34, pct: 0.585, ps: 121.7, pa: 116.9, diff: 4.7},
            'SAC': {name: 'Sacramento Kings', w: 40, l: 42, pct: 0.488, ps: 115.7, pa: 115.3, diff: 0.5},
            'DAL': {name: 'Dallas Mavericks', w: 39, l: 43, pct: 0.476, ps: 114.2, pa: 115.4, diff: -0.7},
            'PHX': {name: 'Phoenix Suns', w: 36, l: 46, pct: 0.439, ps: 113.6, pa: 116.6, diff: -2.5},
            'POR': {name: 'Portland Trail Blazers', w: 36, l: 46, pct: 0.439, ps: 110.9, pa: 113.9, diff: -2.6},
            'SAS': {name: 'San Antonio Spurs', w: 34, l: 48, pct: 0.415, ps: 113.9, pa: 116.7, diff: -2.4},
            'NOP': {name: 'New Orleans Pelicans', w: 21, l: 61, pct: 0.256, ps: 109.8, pa: 119.3, diff: -8.5},
            'UTA': {name: 'Utah Jazz', w: 17, l: 65, pct: 0.207, ps: 111.9, pa: 121.2, diff: -8.5}
        };
        
        function drawTeamGrid() {
            const colors = getChartColors();
            const width = mapCanvas.width = mapCanvas.offsetWidth * 2;
            const height = mapCanvas.height = 1000;
            
            mapCtx.clearRect(0, 0, width, height);
            
            // Background with gradient
            const bgGradient = mapCtx.createLinearGradient(0, 0, 0, height);
            bgGradient.addColorStop(0, colors.grid + '10');
            bgGradient.addColorStop(1, colors.grid + '05');
            mapCtx.fillStyle = bgGradient;
            mapCtx.fillRect(0, 0, width, height);
            
            // Calculate responsive spacing
            const cols = 10;
            const rows = 3;
            const padding = 100;
            const availableWidth = width - (padding * 2);
            const availableHeight = 650;
            const colSpacing = availableWidth / cols;
            const rowSpacing = availableHeight / rows;
            
            // NBA Teams organized in clean grid (maintaining order)
            const teams = [
                // Row 1 (Top) - 10 teams
                'POR', 'LAC', 'GSW', 'MEM', 'CLE', 'WAS', 'CHI', 'IND', 'MIL', 'CHA',
                // Row 2 - 10 teams
                'OKC', 'DEN', 'MIN', 'DAL', 'TOR', 'DET', 'NYK', 'BKN', 'PHI', 'BOS',
                // Row 3 (Bottom) - 10 teams
                'PHX', 'LAL', 'SAC', 'UTA', 'SAS', 'HOU', 'NOP', 'ATL', 'ORL', 'MIA'
            ];
            
            const teamWins = {
                'POR': 36, 'LAC': 50, 'GSW': 48, 'MEM': 48, 'CLE': 64,
                'WAS': 18, 'CHI': 39, 'IND': 50, 'MIL': 48, 'CHA': 19,
                'OKC': 68, 'DEN': 50, 'MIN': 49, 'DAL': 39, 'TOR': 30,
                'DET': 44, 'NYK': 51, 'BKN': 26, 'PHI': 24, 'BOS': 61,
                'PHX': 36, 'LAL': 50, 'SAC': 40, 'UTA': 17, 'SAS': 34,
                'HOU': 52, 'NOP': 21, 'ATL': 40, 'ORL': 41, 'MIA': 37
            };
            
            // Draw teams
            teams.forEach((teamName, index) => {
                const row = Math.floor(index / cols);
                const col = index % cols;
                
                // Center position for each team
                const x = padding + (col * colSpacing) + (colSpacing / 2);
                const y = 120 + (row * rowSpacing) + (rowSpacing / 2);
                
                const wins = teamWins[teamName];
                const baseSize = 45;
                const size = baseSize + (wins / 64) * 15;
                
                // Determine color based on wins
                let tierColor;
                if (wins >= 55) tierColor = colors.nbaBlue;
                else if (wins >= 45) tierColor = colors.success;
                else if (wins >= 35) tierColor = colors.warning;
                else tierColor = colors.danger;
                
                // Outer glow circle
                mapCtx.shadowColor = tierColor + '60';
                mapCtx.shadowBlur = 15;
                mapCtx.fillStyle = tierColor + '25';
                mapCtx.beginPath();
                mapCtx.arc(x, y, size + 5, 0, Math.PI * 2);
                mapCtx.fill();
                mapCtx.shadowBlur = 0;
                
                // Main circle background
                mapCtx.fillStyle = colors.dark_bg === '#0f172a' ? '#1e293b' : '#ffffff';
                mapCtx.beginPath();
                mapCtx.arc(x, y, size, 0, Math.PI * 2);
                mapCtx.fill();
                
                // Border
                mapCtx.strokeStyle = tierColor;
                mapCtx.lineWidth = 3;
                mapCtx.stroke();
                
                // Check if logo is loaded
                if (teamLogos[teamName]) {
                    mapCtx.save();
                    mapCtx.beginPath();
                    mapCtx.arc(x, y, size - 3, 0, Math.PI * 2);
                    mapCtx.clip();
                    
                    const logoSize = (size - 3) * 2;
                    mapCtx.drawImage(
                        teamLogos[teamName],
                        x - logoSize/2,
                        y - logoSize/2,
                        logoSize,
                        logoSize
                    );
                    mapCtx.restore();
                } else {
                    // Fallback: team abbreviation
                    mapCtx.fillStyle = tierColor;
                    mapCtx.font = `bold ${size * 0.45}px Inter`;
                    mapCtx.textAlign = 'center';
                    mapCtx.textBaseline = 'middle';
                    mapCtx.fillText(teamName, x, y);
                }
                
                // Team name above
                mapCtx.fillStyle = colors.text;
                mapCtx.font = 'bold 15px Inter';
                mapCtx.textAlign = 'center';
                mapCtx.textBaseline = 'bottom';
                mapCtx.shadowColor = colors.dark_bg === '#0f172a' ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)';
                mapCtx.shadowBlur = 4;
                mapCtx.fillText(teamName, x, y - size - 8);
                
                // Win count below
                mapCtx.font = 'bold 14px Inter';
                mapCtx.textBaseline = 'top';
                mapCtx.fillText(wins + 'W', x, y + size + 8);
                mapCtx.shadowBlur = 0;
            });
            
            // Enhanced Legend - Centered at bottom
            const legendWidth = 450;
            const legendHeight = 170;
            const legendX = (width - legendWidth) / 2;
            const legendY = 770;
            
            // Legend background
            mapCtx.fillStyle = colors.dark_bg === '#0f172a' ? 'rgba(30, 41, 59, 0.95)' : 'rgba(248, 250, 252, 0.95)';
            mapCtx.fillRect(legendX, legendY, legendWidth, legendHeight);
            mapCtx.strokeStyle = colors.primary;
            mapCtx.lineWidth = 2;
            mapCtx.strokeRect(legendX, legendY, legendWidth, legendHeight);
            
            // Legend title
            mapCtx.font = 'bold 20px Inter';
            mapCtx.fillStyle = colors.text;
            mapCtx.textAlign = 'center';
            mapCtx.shadowBlur = 0;
            mapCtx.fillText('Performance Tiers', legendX + legendWidth / 2, legendY + 30);
            
            const tiers = [
                {label: 'Elite (55+ wins)', color: colors.nbaBlue},
                {label: 'Playoff (45-54 wins)', color: colors.success},
                {label: 'Average (35-44 wins)', color: colors.warning},
                {label: 'Rebuilding (<35 wins)', color: colors.danger}
            ];
            
            const tierStartY = legendY + 60;
            const tierSpacing = 30;
            
            tiers.forEach((tier, i) => {
                const tierY = tierStartY + i * tierSpacing;
                const circleX = legendX + 40;
                
                // Circle
                mapCtx.fillStyle = tier.color + '40';
                mapCtx.beginPath();
                mapCtx.arc(circleX, tierY, 12, 0, Math.PI * 2);
                mapCtx.fill();
                
                mapCtx.strokeStyle = tier.color;
                mapCtx.lineWidth = 2.5;
                mapCtx.stroke();
                
                // Label
                mapCtx.fillStyle = colors.text;
                mapCtx.font = '16px Inter';
                mapCtx.textAlign = 'left';
                mapCtx.textBaseline = 'middle';
                mapCtx.fillText(tier.label, circleX + 25, tierY);
            });
        }
        
        // Load team logos
        const logoUrls = [
            {name: 'POR', url: 'https://cdn.nba.com/logos/nba/1610612757/primary/L/logo.svg'},
            {name: 'GSW', url: 'https://cdn.nba.com/logos/nba/1610612744/primary/L/logo.svg'},
            {name: 'SAC', url: 'https://cdn.nba.com/logos/nba/1610612758/primary/L/logo.svg'},
            {name: 'LAL', url: 'https://cdn.nba.com/logos/nba/1610612747/primary/L/logo.svg'},
            {name: 'LAC', url: 'https://cdn.nba.com/logos/nba/1610612746/primary/L/logo.svg'},
            {name: 'PHX', url: 'https://cdn.nba.com/logos/nba/1610612756/primary/L/logo.svg'},
            {name: 'UTA', url: 'https://cdn.nba.com/logos/nba/1610612762/primary/L/logo.svg'},
            {name: 'DEN', url: 'https://cdn.nba.com/logos/nba/1610612743/primary/L/logo.svg'},
            {name: 'OKC', url: 'https://cdn.nba.com/logos/nba/1610612760/primary/L/logo.svg'},
            {name: 'DAL', url: 'https://cdn.nba.com/logos/nba/1610612742/primary/L/logo.svg'},
            {name: 'SAS', url: 'https://cdn.nba.com/logos/nba/1610612759/primary/L/logo.svg'},
            {name: 'HOU', url: 'https://cdn.nba.com/logos/nba/1610612745/primary/L/logo.svg'},
            {name: 'MEM', url: 'https://cdn.nba.com/logos/nba/1610612763/primary/L/logo.svg'},
            {name: 'NOP', url: 'https://cdn.nba.com/logos/nba/1610612740/primary/L/logo.svg'},
            {name: 'MIN', url: 'https://cdn.nba.com/logos/nba/1610612750/primary/L/logo.svg'},
            {name: 'MIL', url: 'https://cdn.nba.com/logos/nba/1610612749/primary/L/logo.svg'},
            {name: 'CHI', url: 'https://cdn.nba.com/logos/nba/1610612741/primary/L/logo.svg'},
            {name: 'IND', url: 'https://cdn.nba.com/logos/nba/1610612754/primary/L/logo.svg'},
            {name: 'DET', url: 'https://cdn.nba.com/logos/nba/1610612765/primary/L/logo.svg'},
            {name: 'CLE', url: 'https://cdn.nba.com/logos/nba/1610612739/primary/L/logo.svg'},
            {name: 'ATL', url: 'https://cdn.nba.com/logos/nba/1610612737/primary/L/logo.svg'},
            {name: 'CHA', url: 'https://cdn.nba.com/logos/nba/1610612766/primary/L/logo.svg'},
            {name: 'ORL', url: 'https://cdn.nba.com/logos/nba/1610612753/primary/L/logo.svg'},
            {name: 'MIA', url: 'https://cdn.nba.com/logos/nba/1610612748/primary/L/logo.svg'},
            {name: 'TOR', url: 'https://cdn.nba.com/logos/nba/1610612761/primary/L/logo.svg'},
            {name: 'BOS', url: 'https://cdn.nba.com/logos/nba/1610612738/primary/L/logo.svg'},
            {name: 'NYK', url: 'https://cdn.nba.com/logos/nba/1610612752/primary/L/logo.svg'},
            {name: 'BKN', url: 'https://cdn.nba.com/logos/nba/1610612751/primary/L/logo.svg'},
            {name: 'PHI', url: 'https://cdn.nba.com/logos/nba/1610612755/primary/L/logo.svg'},
            {name: 'WAS', url: 'https://cdn.nba.com/logos/nba/1610612764/primary/L/logo.svg'}
        ];
        
        logoUrls.forEach(({name, url}) => {
            const img = new Image();
            img.crossOrigin = 'anonymous';
            img.onload = () => {
                teamLogos[name] = img;
                logosLoaded++;
                if (logosLoaded === totalLogos) {
                    drawTeamGrid();
                }
            };
            img.onerror = () => {
                logosLoaded++;
                if (logosLoaded === totalLogos) {
                    drawTeamGrid();
                }
            };
            img.src = url;
        });
        
        // Initial draw with fallback
        setTimeout(() => drawTeamGrid(), 100);
        
        // Redraw on window resize
        window.addEventListener('resize', () => {
            hoveredTeam = null; // Reset hover on resize
            drawTeamGrid();
        });

        // Conference Distribution Chart
        const conferenceCtx = document.getElementById('conferenceChart').getContext('2d');
        charts.conference = new Chart(conferenceCtx, {
            type: 'bar',
            data: {
                labels: ['Eastern Conference', 'Western Conference'],
                datasets: [{
                    label: 'Avg Win %',
                    data: [0.512, 0.498],
                    backgroundColor: [getChartColors().nbaRed, getChartColors().nbaBlue],
                    borderWidth: 0
                }, {
                    label: 'Avg Net Rating',
                    data: [1.8, 1.2],
                    backgroundColor: [getChartColors().secondary + '80', getChartColors().primary + '80'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        labels: { color: getChartColors().text }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    x: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Championship Timeline
        const timelineCtx = document.getElementById('championTimelineChart').getContext('2d');
        charts.timeline = new Chart(timelineCtx, {
            type: 'line',
            data: {
                labels: ['2014-15', '2015-16', '2016-17', '2017-18', '2018-19', '2019-20', '2020-21', '2021-22', '2022-23', '2023-24'],
                datasets: [{
                    label: 'Champions',
                    data: [67, 73, 67, 58, 57, 53, 52, 51, 58, 64],
                    borderColor: getChartColors().success,
                    backgroundColor: getChartColors().success + '20',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 5,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        labels: { color: getChartColors().text }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const teams = ['GSW', 'CLE', 'GSW', 'GSW', 'TOR', 'LAL', 'MIL', 'GSW', 'DEN', 'BOS'];
                                return teams[context.dataIndex] + ': ' + context.parsed.y + ' wins';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 45,
                        max: 75,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    x: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Team Performance Comparison
        const performanceCtx = document.getElementById('teamPerformanceChart').getContext('2d');
        charts.performance = new Chart(performanceCtx, {
            type: 'radar',
            data: {
                labels: ['Offensive Rating', 'Defensive Rating', 'Net Rating', 'Win %', 'Pace', 'eFG%'],
                datasets: [{
                    label: 'Top Teams Avg',
                    data: [118.5, 110.2, 8.3, 68, 99.8, 57.2],
                    borderColor: getChartColors().success,
                    backgroundColor: getChartColors().success + '30',
                    pointBackgroundColor: getChartColors().success
                }, {
                    label: 'League Average',
                    data: [113.8, 113.8, 0, 50, 98.5, 54.5],
                    borderColor: getChartColors().warning,
                    backgroundColor: getChartColors().warning + '30',
                    pointBackgroundColor: getChartColors().warning
                }]
            },
            options: {
                responsive: true,
                scales: {
                    r: {
                        beginAtZero: true,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid },
                        pointLabels: { color: getChartColors().text }
                    }
                },
                plugins: {
                    legend: {
                        labels: { color: getChartColors().text }
                    }
                }
            }
        });

        // Feature Correlation Matrix (simplified heatmap representation)
        const correlationCtx = document.getElementById('correlationChart').getContext('2d');
        charts.correlation = new Chart(correlationCtx, {
            type: 'bar',
            data: {
                labels: ['Win% & Net Rating', 'Off Rating & Pace', 'Def Rating & Win%', 'Home% & Away%', 'Streak & Confidence'],
                datasets: [{
                    label: 'Correlation Coefficient',
                    data: [0.89, 0.64, -0.72, 0.58, 0.81],
                    backgroundColor: [
                        getChartColors().success,
                        getChartColors().primary,
                        getChartColors().danger,
                        getChartColors().primary,
                        getChartColors().success
                    ]
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        min: -1,
                        max: 1,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    y: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Feature Importance
        const featureImportanceCtx = document.getElementById('featureImportanceChart').getContext('2d');
        charts.featureImportance = new Chart(featureImportanceCtx, {
            type: 'bar',
            data: {
                labels: ['Net Rating', 'Win Streak', 'Home Win%', 'Playoff Exp', 'Def Rating', 'Off Rating', 'Pace', 'Injury Score', 'PER', 'eFG%'],
                datasets: [{
                    label: 'Importance Score',
                    data: [0.24, 0.19, 0.16, 0.13, 0.11, 0.08, 0.05, 0.02, 0.01, 0.01],
                    backgroundColor: getChartColors().primary
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 0.25,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    y: {
                        ticks: { color: getChartColors().text, font: { size: 11 } },
                        grid: { display: false }
                    }
                }
            }
        });

        // Season vs Playoff Performance
        const seasonPlayoffCtx = document.getElementById('seasonPlayoffChart').getContext('2d');
        charts.seasonPlayoff = new Chart(seasonPlayoffCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'NBA Teams',
                    data: [
                        {x: 78, y: 83}, {x: 70, y: 68}, {x: 65, y: 71}, {x: 62, y: 58},
                        {x: 59, y: 62}, {x: 57, y: 65}, {x: 55, y: 52}, {x: 52, y: 48},
                        {x: 49, y: 55}, {x: 46, y: 42}, {x: 44, y: 38}, {x: 41, y: 35},
                        {x: 38, y: 40}, {x: 35, y: 30}, {x: 32, y: 28}, {x: 28, y: 25}
                    ],
                    backgroundColor: getChartColors().primary,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Regular Season Win%',
                            color: getChartColors().text
                        },
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Playoff Win%',
                            color: getChartColors().text
                        },
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    }
                }
            }
        });

        // Model Comparison
        const modelComparisonCtx = document.getElementById('modelComparisonChart').getContext('2d');
        charts.modelComparison = new Chart(modelComparisonCtx, {
            type: 'bar',
            data: {
                labels: ['Ensemble', 'XGBoost', 'Random Forest', 'Gradient Boost', 'Neural Net', 'Log Regression'],
                datasets: [{
                    label: 'Accuracy (%)',
                    data: [96.0, 93.5, 92.8, 91.2, 89.5, 85.3],
                    backgroundColor: [
                        getChartColors().success,
                        getChartColors().primary,
                        getChartColors().primary,
                        getChartColors().secondary,
                        getChartColors().secondary,
                        getChartColors().warning
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    x: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Confusion Matrix (simplified)
        const confusionCtx = document.getElementById('confusionMatrixChart').getContext('2d');
        charts.confusion = new Chart(confusionCtx, {
            type: 'bar',
            data: {
                labels: ['True Positive', 'True Negative', 'False Positive', 'False Negative'],
                datasets: [{
                    label: 'Count',
                    data: [48, 144, 3, 5],
                    backgroundColor: [
                        getChartColors().success,
                        getChartColors().success,
                        getChartColors().danger,
                        getChartColors().danger
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    x: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Cross-Validation Performance
        const cvCtx = document.getElementById('cvPerformanceChart').getContext('2d');
        charts.cv = new Chart(cvCtx, {
            type: 'line',
            data: {
                labels: ['Fold 1', 'Fold 2', 'Fold 3', 'Fold 4', 'Fold 5'],
                datasets: [{
                    label: 'Accuracy',
                    data: [0.953, 0.968, 0.945, 0.972, 0.962],
                    borderColor: getChartColors().primary,
                    backgroundColor: getChartColors().primary + '20',
                    fill: true,
                    tension: 0.4
                }, {
                    label: 'F1-Score',
                    data: [0.948, 0.963, 0.941, 0.967, 0.956],
                    borderColor: getChartColors().secondary,
                    backgroundColor: getChartColors().secondary + '20',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        labels: { color: getChartColors().text }
                    }
                },
                scales: {
                    y: {
                        min: 0.9,
                        max: 1.0,
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    x: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Predicted vs Actual Champions
        const predictedActualCtx = document.getElementById('predictedActualChart').getContext('2d');
        charts.predictedActual = new Chart(predictedActualCtx, {
            type: 'bar',
            data: {
                labels: ['2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                datasets: [{
                    label: 'Predicted',
                    data: [85, 88, 82, 79, 84, 75, 78, 83, 86, 91],
                    backgroundColor: getChartColors().primary + '80'
                }, {
                    label: 'Actual',
                    data: [83, 89, 83, 78, 85, 72, 76, 84, 87, 91],
                    backgroundColor: getChartColors().success
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        labels: { color: getChartColors().text }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 70,
                        max: 95,
                        title: {
                            display: true,
                            text: 'Championship Probability Score',
                            color: getChartColors().text
                        },
                        ticks: { color: getChartColors().text },
                        grid: { color: getChartColors().grid }
                    },
                    x: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Season Accuracy
        const seasonAccuracyCtx = document.getElementById('seasonAccuracyChart').getContext('2d');
        charts.seasonAccuracy = new Chart(seasonAccuracyCtx, {
            type: 'line',
            data: {
                labels: ['2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                datasets: [{
                    label: 'Model Accuracy',
                    data: [0.94, 0.97, 0.96, 0.95, 0.98, 0.88, 0.93, 0.97, 0.98, 0.99],
                    borderColor: getChartColors().success,
                    backgroundColor: getChartColors().success + '30',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 5
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        labels: { color: getChartColors().text }
                    }
                },
                scales: {
                    y: {
                        min: 0.85,
                        max: 1.0,
                        ticks: {
                            color: getChartColors().text,
                            callback: function(value) {
                                return (value * 100).toFixed(0) + '%';
                            }
                        },
                        grid: { color: getChartColors().grid }
                    },
                    x: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Championship Probability
        const championshipProbCtx = document.getElementById('championshipProbChart').getContext('2d');
        charts.championshipProb = new Chart(championshipProbCtx, {
            type: 'bar',
            data: {
                labels: ['Boston Celtics', 'Denver Nuggets', 'Milwaukee Bucks', 'Phoenix Suns', 'LA Lakers'],
                datasets: [{
                    label: 'Championship Probability (%)',
                    data: [28.5, 22.3, 18.7, 14.2, 11.8],
                    backgroundColor: [
                        getChartColors().success,
                        getChartColors().primary,
                        getChartColors().primary,
                        getChartColors().secondary,
                        getChartColors().warning
                    ]
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 30,
                        ticks: {
                            color: getChartColors().text,
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        grid: { color: getChartColors().grid }
                    },
                    y: {
                        ticks: { color: getChartColors().text },
                        grid: { display: false }
                    }
                }
            }
        });

        // Update all charts when theme changes
        function updateChartColors() {
            drawTeamGrid();
            Object.values(charts).forEach(chart => {
                const colors = getChartColors();
                
                // Update scales colors
                if (chart.options.scales) {
                    if (chart.options.scales.x) {
                        chart.options.scales.x.ticks.color = colors.text;
                        if (chart.options.scales.x.grid) {
                            chart.options.scales.x.grid.color = colors.grid;
                        }
                        if (chart.options.scales.x.title) {
                            chart.options.scales.x.title.color = colors.text;
                        }
                    }
                    if (chart.options.scales.y) {
                        chart.options.scales.y.ticks.color = colors.text;
                        if (chart.options.scales.y.grid) {
                            chart.options.scales.y.grid.color = colors.grid;
                        }
                        if (chart.options.scales.y.title) {
                            chart.options.scales.y.title.color = colors.text;
                        }
                    }
                    if (chart.options.scales.r) {
                        chart.options.scales.r.ticks.color = colors.text;
                        chart.options.scales.r.grid.color = colors.grid;
                        chart.options.scales.r.pointLabels.color = colors.text;
                    }
                }
                
                // Update legend colors
                if (chart.options.plugins && chart.options.plugins.legend) {
                    chart.options.plugins.legend.labels.color = colors.text;
                }
                
                chart.update();
            });
        }

        // Smooth Scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>
